(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{418:function(module,__webpack_exports__,__webpack_require__){"use strict";var D_www_sitiosAWT_Saw3_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(422),core_js_modules_es7_object_entries__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(153),core_js_modules_es7_object_entries__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es7_object_entries__WEBPACK_IMPORTED_MODULE_1__),D_www_sitiosAWT_Saw3_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(105),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_4__);__webpack_exports__.a={name:"base-sync",asyncData:function asyncData(_ref){var $axios=_ref.$axios,store=_ref.store,route=_ref.route,error=_ref.error;if(route.meta[0].hasOwnProperty("store_props")){var _route$meta$=route.meta[0],store_props=_route$meta$.store_props,data_var=_route$meta$.data_var,model=store_props.model,query=store_props.query,fetch=store_props.fetch,dependencies=store_props.dependencies,notFound=function(){return error({statusCode:404,message:"Not Found",to:route.meta[0].redirect})},parseQuery=function parseQuery(){if(query){var params_regep=/(\w+)\((.*)\)/,value=model;if(query.split(/\.(?=\w+\(.*\))/).forEach(function(q){var parsed=params_regep.exec(q);value=value[parsed[1]](eval(parsed[2]))}),value&&data_var)return Object(D_www_sitiosAWT_Saw3_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_2__.a)({},data_var,value);notFound()}};return dependencies&&Object.entries(dependencies).forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dep,t=Object(D_www_sitiosAWT_Saw3_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(e,2),n=t[0],r=t[1],o="entities/".concat(n);store.getters["".concat(o,"/isSynced")]||$axios.get("api/".concat(r)).then(function(e){var data=e.data;store.dispatch("entities/insert",{entity:n,data:data.result}).then(function(){store.dispatch("".concat(o,"/synchronize"),!0)}).catch(function(e){return console.log(e)})}).catch(function(e){console.log(e)})}),model&&!model.getters("isSynced")?$axios.get("api/".concat(fetch)).then(function(e){var data=e.data;return model.insert({data:data.result}),model.sync(!0),parseQuery()}).catch(function(e){e.hasOwnProperty("response")&&404===e.response.status&&notFound(),console.log(e)}):parseQuery()}}}},419:function(e,t,n){"use strict";var r={name:"crud-actions",extends:n(420).a,beforeDestroy:function(){this.mixin.admin.notification.active=!1},methods:{isValid:function(){var e=this;return this.$bus.$emit("validate"),new Promise(function(t,n){e.$bus.$on("validated",function(e){e&&t(e),n(e)})})},save:function(data){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"created";this.isValid().then(function(){e.send(e.repository.save(data),e.repository.getResource()+"/saving").then(function(n){e.$bus.$emit(t,n)})})},saveAndReload:function(data){this.save(data,"reloaded")},update:function(e,data){var t=this;this.isValid().then(function(){t.send(t.repository.update(e,data),t.repository.getResource()+"/updating").then(function(e){t.$bus.$emit("updated",e)})})},destroy:function(e){var t=this;this.isValid().then(function(){t.isValid().then(function(){t.send(t.repository.delete(e),t.repository.getResource()+"/deleting").then(function(e){t.$bus.$emit("deleted",e)})})})},send:function(e,t){var n=this;return this.mixin.sending_now=t,e.then(function(e){return n.parseResponse(e)?e.data.result:reject("error")}).catch(function(e){n.parseResponse(e)}).finally(function(){n.mixin.sending_now=""})}}},o=n(19),component=Object(o.a)(r,void 0,void 0,!1,null,null,null);t.a=component.exports},420:function(e,t,n){"use strict";var r=n(418).a,o=n(19),component=Object(o.a)(r,void 0,void 0,!1,null,null,null);t.a=component.exports},428:function(e,t,n){"use strict";n(33),n(108),n(153),n(20),n(425);var r={name:"modal-loading",props:{is_sending:Boolean}},o=n(19),l=n(41),c=n.n(l),_=n(143),d=n(417),v=n(472),f=n(133),component=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:e.is_sending,callback:function(t){e.is_sending=t},expression:"is_sending"}},[n("v-card",{attrs:{color:"green accent-4",dark:""}},[n("v-card-text",[e._v("\n            "+e._s(e.$t("dialogs.sending"))+"\n            "),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)},[],!1,null,"98843022",null),m=component.exports;c()(component,{VCard:_.a,VCardText:d.b,VDialog:v.a,VProgressLinear:f.a});var h={name:"base-form",components:{ModalLoading:m},props:{title:String,icon_action:String,link_to_list:String,data:Object,time:{type:Number,default:1500},sending_condition:{type:Boolean,default:!0}},created:function(){var e=this;this.$bus.$on("errors",function(t){Object.entries(t).forEach(function(t){var n=e.$validator._base.fields.find({name:t[0]});e.errors.add({id:n.id,field:n.name,msg:t[1][0],scope:n.scope,vmId:n.vmId}),n.setFlags({valid:!t[1].length,dirty:!0})})})},computed:{hasErrors:function(){return this.$validator.errors.items.length>0}}},x=n(475),y=n(128),k=n(146),w=n(139),$=n(411),E=n(147),O=n(415),V=Object(o.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-toolbar",{attrs:{card:"",color:"cyan",dark:""}},[n("nuxt-link",{staticClass:"link",attrs:{to:e.link_to_list}},[n("v-icon",[e._v("list")])],1),e._v(" "),n("v-toolbar-title",[e._v(e._s(e.title))]),e._v(" "),n("v-spacer"),e._v(" "),e._t("icon_actions"),e._v(" "),n("v-icon",[e._v(e._s(e.icon_action))])],2),e._v(" "),e._t("form"),e._v(" "),n("v-alert",{attrs:{value:e.hasErrors,type:"error",color:"red accent--1",transition:"scale-transition"}},[e._v("\n        "+e._s(e.$t("alerts.invalid_form"))+"\n        "),n("ul",e._l(e.$validator.errors.items,function(t){return n("li",{key:t.id},[e._v(e._s(t.field))])}),0)]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-layout",{attrs:{"justify-end":""}},[e._t("actions")],2)],1),e._v(" "),n("modal-loading",{attrs:{is_sending:e.isSending&&e.sending_condition}})],2)},[],!1,null,"4556f227",null);t.a=V.exports;c()(V,{VAlert:x.a,VCard:_.a,VCardActions:d.a,VDivider:y.a,VIcon:k.a,VLayout:w.a,VSpacer:$.a,VToolbar:E.a,VToolbarTitle:O.a})},447:function(e,t,n){var content=n(496);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(6).default)("2725043c",content,!0,{sourceMap:!1})},469:function(e,t,n){"use strict";n(20);var r={name:"base-form",components:{vueRecaptcha:n(448).a},props:{useRecaptcha:{required:!1,type:Boolean,default:!1},recaptchaKey:{required:!1,type:String}},created:function(){var e=this;this.$bus.$on("turnOffValidator",function(){e.$validator._paused=!0}),this.$bus.$on("turnOnValidator",function(){e.$validator._paused=!1}),this.$bus.$on("validate",function(){e.$validator.validate().then(function(t){e.useRecaptcha?e.$refs.recaptcha.execute():e.$bus.$emit("validated",t)})})},destroyed:function(){this.$bus.$off("validate"),this.mixin.admin.notification.active=!1},methods:{resetRecaptcha:function(){this.$refs.recaptcha.reset()},getMedias:function(e,t){return e.map(function(e){return e.processFiles()}).forEach(function(e){e.medias.forEach(function(n){t.append("medias[".concat(e.group,"][files][]"),n.file),delete n.file,t.append("medias[".concat(e.group,"][attributes][]"),JSON.stringify(n))}),t.append("medias[".concat(e.group,"][mimes]"),JSON.stringify(e.mimes)),t.append("medias[".concat(e.group,"][uploaded]"),JSON.stringify(e.uploaded))}),t}}},o=n(19),component=Object(o.a)(r,void 0,void 0,!1,null,null,null);t.a=component.exports},480:function(e,t,n){"use strict";n(33),n(82),n(83),n(157);var r={name:"select-two",inject:["$validator"],props:{rules:String,tags:{type:Array,default:function(){return[]}},item_list:{type:Array,default:[]},url:String},data:function(){return{items:{all:[],selected:[],filtered:{all:[],selected:[]}},picked:{all:[],selected:[]},needles:{all:"",selected:""}}},mounted:function(){this.init()},methods:{init:function(){this.items.all=this.items.filtered.all=this.item_list,this.picked.all=this.tags,this.add()},add:function(){var e=this,t=this.items.selected.concat(this.picked.all);this.items.all=this.items.filtered.all=this.items.all.filter(function(t){return-1===e.picked.all.findIndex(function(i){return i.id===t.id})}),this.items.selected=this.items.filtered.selected=t,this.picked.all=[],this.$emit("synced",this.items.selected)},remove:function(){var e=this,t=this.items.all.concat(this.picked.selected);this.items.selected=this.items.filtered.selected=this.items.selected.filter(function(t){return-1===e.picked.selected.findIndex(function(i){return i.id===t.id})}),this.items.all=this.items.filtered.all=t,this.picked.selected=[],this.$emit("synced",this.items.selected)},toggle:function(e){this.picked[e].length&&this.picked[e].length===this.items.filtered[e].length?this.picked[e]=[]:this.picked[e]=this.items.filtered[e]}},watch:{"needles.all":function(e){e=null===e?"":e,this.items.filtered.all=this.items.all.filter(function(t){return t.name.includes(e)})},"needles.selected":function(e){e=null===e?"":e,this.items.filtered.selected=this.items.selected.filter(function(t){return t.name.includes(e)})},item_list:function(){this.init()}}},o=(n(495),n(19)),l=n(41),c=n.n(l),_=n(144),d=n(134),v=n(128),f=n(138),m=n(146),h=n(139),x=n(129),y=n(130),k=n(131),w=n(149),$=n(471),component=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{id:"select_two",row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{xs5:"",sm5:""}},[n("v-layout",[n("v-flex",[n("v-btn",{staticClass:"mr-0 ml-0",attrs:{flat:"",icon:"",color:"teal"},on:{click:function(t){return e.toggle("selected")}}},[n("v-icon",[e._v(e._s(e.picked.selected.length===this.items.selected.length&&this.items.selected.length?"check_box":e.picked.selected.length?"indeterminate_check_box":"check_box_outline_blank")+"\n                    ")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs11:"",sm11:""}},[n("v-text-field",{attrs:{box:"",clearable:"","prepend-inner-icon":"search"},model:{value:e.needles.selected,callback:function(t){e.$set(e.needles,"selected",t)},expression:"needles.selected"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),e._l(e.items.filtered.selected,function(t){return n("v-list",{key:t.id},[n("v-list-tile",[n("v-list-tile-action",[n("v-checkbox",{attrs:{value:t,multiple:!0},model:{value:e.picked.selected,callback:function(t){e.$set(e.picked,"selected",t)},expression:"picked.selected"}})],1),e._v(" "),n("v-list-tile-content",[e._v("\n                    "+e._s(t.name)+"\n                ")])],1)],1)})],2),e._v(" "),n("v-flex",{staticClass:"actions",attrs:{xs1:"",sm1:""}},[n("v-btn",{attrs:{fab:"",flat:"",disabled:!e.items.all.length},on:{click:e.add}},[n("v-icon",[e._v("\n                chevron_left\n            ")])],1),e._v(" "),n("v-btn",{attrs:{fab:"",flat:"",disabled:!e.items.selected.length},on:{click:e.remove}},[n("v-icon",[e._v("\n                chevron_right\n            ")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs5:"",sm5:""}},[n("v-layout",[n("v-flex",[n("v-btn",{staticClass:"mr-0 ml-0",attrs:{flat:"",icon:"",color:"teal"},on:{click:function(t){return e.toggle("all")}}},[n("v-icon",[e._v(e._s(e.picked.all.length===this.items.all.length&&this.items.all.length?"check_box":e.picked.all.length?"indeterminate_check_box":"check_box_outline_blank")+"\n                    ")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs11:"",sm11:""}},[n("v-text-field",{attrs:{box:"",clearable:"","prepend-inner-icon":"search"},model:{value:e.needles.all,callback:function(t){e.$set(e.needles,"all",t)},expression:"needles.all"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),e._l(e.items.filtered.all,function(t){return n("v-list",{key:t.id},[n("v-list-tile",[n("v-list-tile-action",[n("v-checkbox",{attrs:{value:t,multiple:!0},model:{value:e.picked.all,callback:function(t){e.$set(e.picked,"all",t)},expression:"picked.all"}})],1),e._v(" "),n("v-list-tile-content",[e._v("\n                    "+e._s(t.name)+"\n                ")])],1)],1)})],2)],1)},[],!1,null,"7f3691ba",null),E=component.exports;c()(component,{VBtn:_.a,VCheckbox:d.a,VDivider:v.a,VFlex:f.a,VIcon:m.a,VLayout:h.a,VList:x.a,VListTile:y.a,VListTileAction:k.a,VListTileContent:w.a,VTextField:$.a});var O=n(469),V=n(21),D={name:"rol-form",inject:["$validator"],extends:O.a,components:{SelectTwo:E},props:{rol:Object},computed:{permisos:function(){return V.Permission.query().where("active",!0).get()}}},P=n(136),j=n(470),T=n(497),M=n(431),C=Object(o.a)(D,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",staticClass:"vee",attrs:{novalidate:""}},[n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",sm12:""}},[n("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{label:"Nombre",name:"name","error-messages":e.errors.collect("name"),outline:""},model:{value:e.rol.name,callback:function(t){e.$set(e.rol,"name",t)},expression:"rol.name"}}),e._v(" "),n("v-textarea",{attrs:{outline:"",name:"description",label:"Description"},model:{value:e.rol.description,callback:function(t){e.$set(e.rol,"description",t)},expression:"rol.description"}})],1)],1),e._v(" "),n("select-two",{attrs:{tags:e.rol.permissions,item_list:e.permisos},on:{synced:function(data){return e.rol.permissions=data}}}),e._v(" "),n("v-divider"),e._v(" "),n("v-layout",{attrs:{row:"","justify-end":""}},[n("v-flex",{attrs:{xs3:"",sm3:""}},[n("v-switch",{attrs:{color:"teal",label:e.$t("roles.form.fields.active")},model:{value:e.rol.active,callback:function(t){e.$set(e.rol,"active",t)},expression:"rol.active"}})],1)],1)],1),e._v(" "),e._t("button")],2)},[],!1,null,"08ad2341",null);t.a=C.exports;c()(C,{VContainer:P.a,VDivider:v.a,VFlex:f.a,VForm:j.a,VLayout:h.a,VSwitch:T.a,VTextField:$.a,VTextarea:M.a})},495:function(e,t,n){"use strict";var r=n(447);n.n(r).a},496:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".actions[data-v-7f3691ba]{justify-content:center;margin:auto}#select_two[data-v-7f3691ba]{min-height:400px}",""])}}]);